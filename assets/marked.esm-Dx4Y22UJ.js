var yt=Object.defineProperty;var wt=(n,e,t)=>e in n?yt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var E=(n,e,t)=>wt(n,typeof e!="symbol"?e+"":e,t);class U extends Error{constructor(t,s){const i=`${U.extractMessage(t)}: ${JSON.stringify({response:t,request:s})}`;super(i);E(this,"response");E(this,"request");Object.setPrototypeOf(this,U.prototype),this.response=t,this.request=s,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,U)}static extractMessage(t){var s,i;return((i=(s=t.errors)==null?void 0:s[0])==null?void 0:i.message)??`GraphQL Error (Code: ${String(t.status)})`}}const Le=n=>n.toUpperCase(),he=n=>typeof n=="function"?n():n,We=(n,e)=>n.map((t,s)=>[t,e[s]]),z=n=>{let e={};return n instanceof Headers?e=Nt(n):Array.isArray(n)?n.forEach(([t,s])=>{t&&s!==void 0&&(e[t]=s)}):n&&(e=n),e},Nt=n=>{const e={};return n.forEach((t,s)=>{e[s]=t}),e},It=n=>{try{const e=n();return St(e)?e.catch(t=>Pe(t)):e}catch(e){return Pe(e)}},Pe=n=>n instanceof Error?n:new Error(String(n)),St=n=>typeof n=="object"&&n!==null&&"then"in n&&typeof n.then=="function"&&"catch"in n&&typeof n.catch=="function"&&"finally"in n&&typeof n.finally=="function",Te=n=>{throw new Error(`Unhandled case: ${String(n)}`)},te=n=>typeof n=="object"&&n!==null&&!Array.isArray(n),At=(n,e)=>n.documents?n:{documents:n,requestHeaders:e,signal:void 0},_t=(n,e,t)=>n.query?n:{query:n,variables:e,requestHeaders:t,signal:void 0};function ne(n,e){if(!!!n)throw new Error(e)}function Ot(n){return typeof n=="object"&&n!==null}function vt(n,e){if(!!!n)throw new Error("Unexpected invariant triggered.")}const Rt=/\r\n|[\n\r]/g;function ge(n,e){let t=0,s=1;for(const i of n.body.matchAll(Rt)){if(typeof i.index=="number"||vt(!1),i.index>=e)break;t=i.index+i[0].length,s+=1}return{line:s,column:e+1-t}}function Ct(n){return Ke(n.source,ge(n.source,n.start))}function Ke(n,e){const t=n.locationOffset.column-1,s="".padStart(t)+n.body,i=e.line-1,r=n.locationOffset.line-1,o=e.line+r,a=e.line===1?t:0,u=e.column+a,l=`${n.name}:${o}:${u}
`,c=s.split(/\r\n|[\n\r]/g),d=c[i];if(d.length>120){const p=Math.floor(u/80),g=u%80,k=[];for(let x=0;x<d.length;x+=80)k.push(d.slice(x,x+80));return l+$e([[`${o} |`,k[0]],...k.slice(1,p+1).map(x=>["|",x]),["|","^".padStart(g)],["|",k[p+1]]])}return l+$e([[`${o-1} |`,c[i-1]],[`${o} |`,d],["|","^".padStart(u)],[`${o+1} |`,c[i+1]]])}function $e(n){const e=n.filter(([s,i])=>i!==void 0),t=Math.max(...e.map(([s])=>s.length));return e.map(([s,i])=>s.padStart(t)+(i?" "+i:"")).join(`
`)}function Dt(n){const e=n[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:e}class ye extends Error{constructor(e,...t){var s,i,r;const{nodes:o,source:a,positions:u,path:l,originalError:c,extensions:d}=Dt(t);super(e),this.name="GraphQLError",this.path=l??void 0,this.originalError=c??void 0,this.nodes=Fe(Array.isArray(o)?o:o?[o]:void 0);const p=Fe((s=this.nodes)===null||s===void 0?void 0:s.map(k=>k.loc).filter(k=>k!=null));this.source=a??(p==null||(i=p[0])===null||i===void 0?void 0:i.source),this.positions=u??(p==null?void 0:p.map(k=>k.start)),this.locations=u&&a?u.map(k=>ge(a,k)):p==null?void 0:p.map(k=>ge(k.source,k.start));const g=Ot(c==null?void 0:c.extensions)?c==null?void 0:c.extensions:void 0;this.extensions=(r=d??g)!==null&&r!==void 0?r:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,ye):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+Ct(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Ke(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function Fe(n){return n===void 0||n.length===0?void 0:n}function N(n,e,t){return new ye(`Syntax Error: ${t}`,{source:n,positions:[e]})}class Lt{constructor(e,t,s){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=s}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class et{constructor(e,t,s,i,r,o){this.kind=e,this.start=t,this.end=s,this.line=i,this.column=r,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const tt={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Pt=new Set(Object.keys(tt));function Be(n){const e=n==null?void 0:n.kind;return typeof e=="string"&&Pt.has(e)}var L;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(L||(L={}));var me;(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(me||(me={}));var m;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(m||(m={}));function xe(n){return n===9||n===32}function Z(n){return n>=48&&n<=57}function nt(n){return n>=97&&n<=122||n>=65&&n<=90}function st(n){return nt(n)||n===95}function $t(n){return nt(n)||Z(n)||n===95}function Ft(n){var e;let t=Number.MAX_SAFE_INTEGER,s=null,i=-1;for(let o=0;o<n.length;++o){var r;const a=n[o],u=Bt(a);u!==a.length&&(s=(r=s)!==null&&r!==void 0?r:o,i=o,o!==0&&u<t&&(t=u))}return n.map((o,a)=>a===0?o:o.slice(t)).slice((e=s)!==null&&e!==void 0?e:0,i+1)}function Bt(n){let e=0;for(;e<n.length&&xe(n.charCodeAt(e));)++e;return e}function qt(n,e){const t=n.replace(/"""/g,'\\"""'),s=t.split(/\r\n|[\n\r]/g),i=s.length===1,r=s.length>1&&s.slice(1).every(g=>g.length===0||xe(g.charCodeAt(0))),o=t.endsWith('\\"""'),a=n.endsWith('"')&&!o,u=n.endsWith("\\"),l=a||u,c=!i||n.length>70||l||r||o;let d="";const p=i&&xe(n.charCodeAt(0));return(c&&!p||r)&&(d+=`
`),d+=t,(c||l)&&(d+=`
`),'"""'+d+'"""'}var h;(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"})(h||(h={}));class Mt{constructor(e){const t=new et(h.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==h.EOF)do if(e.next)e=e.next;else{const t=Ut(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===h.COMMENT);return e}}function zt(n){return n===h.BANG||n===h.DOLLAR||n===h.AMP||n===h.PAREN_L||n===h.PAREN_R||n===h.SPREAD||n===h.COLON||n===h.EQUALS||n===h.AT||n===h.BRACKET_L||n===h.BRACKET_R||n===h.BRACE_L||n===h.PIPE||n===h.BRACE_R}function j(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function ae(n,e){return it(n.charCodeAt(e))&&rt(n.charCodeAt(e+1))}function it(n){return n>=55296&&n<=56319}function rt(n){return n>=56320&&n<=57343}function P(n,e){const t=n.source.body.codePointAt(e);if(t===void 0)return h.EOF;if(t>=32&&t<=126){const s=String.fromCodePoint(t);return s==='"'?`'"'`:`"${s}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function w(n,e,t,s,i){const r=n.line,o=1+t-n.lineStart;return new et(e,t,s,r,o,i)}function Ut(n,e){const t=n.source.body,s=t.length;let i=e;for(;i<s;){const r=t.charCodeAt(i);switch(r){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++n.line,n.lineStart=i;continue;case 13:t.charCodeAt(i+1)===10?i+=2:++i,++n.line,n.lineStart=i;continue;case 35:return jt(n,i);case 33:return w(n,h.BANG,i,i+1);case 36:return w(n,h.DOLLAR,i,i+1);case 38:return w(n,h.AMP,i,i+1);case 40:return w(n,h.PAREN_L,i,i+1);case 41:return w(n,h.PAREN_R,i,i+1);case 46:if(t.charCodeAt(i+1)===46&&t.charCodeAt(i+2)===46)return w(n,h.SPREAD,i,i+3);break;case 58:return w(n,h.COLON,i,i+1);case 61:return w(n,h.EQUALS,i,i+1);case 64:return w(n,h.AT,i,i+1);case 91:return w(n,h.BRACKET_L,i,i+1);case 93:return w(n,h.BRACKET_R,i,i+1);case 123:return w(n,h.BRACE_L,i,i+1);case 124:return w(n,h.PIPE,i,i+1);case 125:return w(n,h.BRACE_R,i,i+1);case 34:return t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34?Jt(n,i):Gt(n,i)}if(Z(r)||r===45)return Vt(n,i,r);if(st(r))return Zt(n,i);throw N(n.source,i,r===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:j(r)||ae(t,i)?`Unexpected character: ${P(n,i)}.`:`Invalid character: ${P(n,i)}.`)}return w(n,h.EOF,s,s)}function jt(n,e){const t=n.source.body,s=t.length;let i=e+1;for(;i<s;){const r=t.charCodeAt(i);if(r===10||r===13)break;if(j(r))++i;else if(ae(t,i))i+=2;else break}return w(n,h.COMMENT,e,i,t.slice(e+1,i))}function Vt(n,e,t){const s=n.source.body;let i=e,r=t,o=!1;if(r===45&&(r=s.charCodeAt(++i)),r===48){if(r=s.charCodeAt(++i),Z(r))throw N(n.source,i,`Invalid number, unexpected digit after 0: ${P(n,i)}.`)}else i=pe(n,i,r),r=s.charCodeAt(i);if(r===46&&(o=!0,r=s.charCodeAt(++i),i=pe(n,i,r),r=s.charCodeAt(i)),(r===69||r===101)&&(o=!0,r=s.charCodeAt(++i),(r===43||r===45)&&(r=s.charCodeAt(++i)),i=pe(n,i,r),r=s.charCodeAt(i)),r===46||st(r))throw N(n.source,i,`Invalid number, expected digit but got: ${P(n,i)}.`);return w(n,o?h.FLOAT:h.INT,e,i,s.slice(e,i))}function pe(n,e,t){if(!Z(t))throw N(n.source,e,`Invalid number, expected digit but got: ${P(n,e)}.`);const s=n.source.body;let i=e+1;for(;Z(s.charCodeAt(i));)++i;return i}function Gt(n,e){const t=n.source.body,s=t.length;let i=e+1,r=i,o="";for(;i<s;){const a=t.charCodeAt(i);if(a===34)return o+=t.slice(r,i),w(n,h.STRING,e,i+1,o);if(a===92){o+=t.slice(r,i);const u=t.charCodeAt(i+1)===117?t.charCodeAt(i+2)===123?Ht(n,i):Yt(n,i):Qt(n,i);o+=u.value,i+=u.size,r=i;continue}if(a===10||a===13)break;if(j(a))++i;else if(ae(t,i))i+=2;else throw N(n.source,i,`Invalid character within String: ${P(n,i)}.`)}throw N(n.source,i,"Unterminated string.")}function Ht(n,e){const t=n.source.body;let s=0,i=3;for(;i<12;){const r=t.charCodeAt(e+i++);if(r===125){if(i<5||!j(s))break;return{value:String.fromCodePoint(s),size:i}}if(s=s<<4|Y(r),s<0)break}throw N(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function Yt(n,e){const t=n.source.body,s=qe(t,e+2);if(j(s))return{value:String.fromCodePoint(s),size:6};if(it(s)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const i=qe(t,e+8);if(rt(i))return{value:String.fromCodePoint(s,i),size:12}}throw N(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function qe(n,e){return Y(n.charCodeAt(e))<<12|Y(n.charCodeAt(e+1))<<8|Y(n.charCodeAt(e+2))<<4|Y(n.charCodeAt(e+3))}function Y(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function Qt(n,e){const t=n.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw N(n.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function Jt(n,e){const t=n.source.body,s=t.length;let i=n.lineStart,r=e+3,o=r,a="";const u=[];for(;r<s;){const l=t.charCodeAt(r);if(l===34&&t.charCodeAt(r+1)===34&&t.charCodeAt(r+2)===34){a+=t.slice(o,r),u.push(a);const c=w(n,h.BLOCK_STRING,e,r+3,Ft(u).join(`
`));return n.line+=u.length-1,n.lineStart=i,c}if(l===92&&t.charCodeAt(r+1)===34&&t.charCodeAt(r+2)===34&&t.charCodeAt(r+3)===34){a+=t.slice(o,r),o=r+1,r+=4;continue}if(l===10||l===13){a+=t.slice(o,r),u.push(a),l===13&&t.charCodeAt(r+1)===10?r+=2:++r,a="",o=r,i=r;continue}if(j(l))++r;else if(ae(t,r))r+=2;else throw N(n.source,r,`Invalid character within String: ${P(n,r)}.`)}throw N(n.source,r,"Unterminated string.")}function Zt(n,e){const t=n.source.body,s=t.length;let i=e+1;for(;i<s;){const r=t.charCodeAt(i);if($t(r))++i;else break}return w(n,h.NAME,e,i,t.slice(e,i))}const Xt=10,ot=2;function we(n){return le(n,[])}function le(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return Wt(n,e);default:return String(n)}}function Wt(n,e){if(n===null)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(Kt(n)){const s=n.toJSON();if(s!==n)return typeof s=="string"?s:le(s,t)}else if(Array.isArray(n))return tn(n,t);return en(n,t)}function Kt(n){return typeof n.toJSON=="function"}function en(n,e){const t=Object.entries(n);return t.length===0?"{}":e.length>ot?"["+nn(n)+"]":"{ "+t.map(([i,r])=>i+": "+le(r,e)).join(", ")+" }"}function tn(n,e){if(n.length===0)return"[]";if(e.length>ot)return"[Array]";const t=Math.min(Xt,n.length),s=n.length-t,i=[];for(let r=0;r<t;++r)i.push(le(n[r],e));return s===1?i.push("... 1 more item"):s>1&&i.push(`... ${s} more items`),"["+i.join(", ")+"]"}function nn(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof n.constructor=="function"){const t=n.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const sn=globalThis.process&&!0,rn=sn?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var s;const i=t.prototype[Symbol.toStringTag],r=Symbol.toStringTag in e?e[Symbol.toStringTag]:(s=e.constructor)===null||s===void 0?void 0:s.name;if(i===r){const o=we(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class at{constructor(e,t="GraphQL request",s={line:1,column:1}){typeof e=="string"||ne(!1,`Body must be a string. Received: ${we(e)}.`),this.body=e,this.name=t,this.locationOffset=s,this.locationOffset.line>0||ne(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||ne(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function on(n){return rn(n,at)}function an(n,e){const t=new ln(n,e),s=t.parseDocument();return Object.defineProperty(s,"tokenCount",{enumerable:!1,value:t.tokenCount}),s}class ln{constructor(e,t={}){const s=on(e)?e:new at(e);this._lexer=new Mt(s),this._options=t,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(h.NAME);return this.node(e,{kind:m.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:m.DOCUMENT,definitions:this.many(h.SOF,this.parseDefinition,h.EOF)})}parseDefinition(){if(this.peek(h.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===h.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw N(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(h.BRACE_L))return this.node(e,{kind:m.OPERATION_DEFINITION,operation:L.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let s;return this.peek(h.NAME)&&(s=this.parseName()),this.node(e,{kind:m.OPERATION_DEFINITION,operation:t,name:s,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(h.NAME);switch(e.value){case"query":return L.QUERY;case"mutation":return L.MUTATION;case"subscription":return L.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(h.PAREN_L,this.parseVariableDefinition,h.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:m.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(h.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(h.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(h.DOLLAR),this.node(e,{kind:m.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:m.SELECTION_SET,selections:this.many(h.BRACE_L,this.parseSelection,h.BRACE_R)})}parseSelection(){return this.peek(h.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let s,i;return this.expectOptionalToken(h.COLON)?(s=t,i=this.parseName()):i=t,this.node(e,{kind:m.FIELD,alias:s,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(h.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(h.PAREN_L,t,h.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,s=this.parseName();return this.expectToken(h.COLON),this.node(t,{kind:m.ARGUMENT,name:s,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(h.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(h.NAME)?this.node(e,{kind:m.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:m.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:m.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:m.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case h.BRACKET_L:return this.parseList(e);case h.BRACE_L:return this.parseObject(e);case h.INT:return this.advanceLexer(),this.node(t,{kind:m.INT,value:t.value});case h.FLOAT:return this.advanceLexer(),this.node(t,{kind:m.FLOAT,value:t.value});case h.STRING:case h.BLOCK_STRING:return this.parseStringLiteral();case h.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:m.BOOLEAN,value:!0});case"false":return this.node(t,{kind:m.BOOLEAN,value:!1});case"null":return this.node(t,{kind:m.NULL});default:return this.node(t,{kind:m.ENUM,value:t.value})}case h.DOLLAR:if(e)if(this.expectToken(h.DOLLAR),this._lexer.token.kind===h.NAME){const s=this._lexer.token.value;throw N(this._lexer.source,t.start,`Unexpected variable "$${s}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:m.STRING,value:e.value,block:e.kind===h.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:m.LIST,values:this.any(h.BRACKET_L,t,h.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:m.OBJECT,fields:this.any(h.BRACE_L,t,h.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,s=this.parseName();return this.expectToken(h.COLON),this.node(t,{kind:m.OBJECT_FIELD,name:s,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(h.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(h.AT),this.node(t,{kind:m.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(h.BRACKET_L)){const s=this.parseTypeReference();this.expectToken(h.BRACKET_R),t=this.node(e,{kind:m.LIST_TYPE,type:s})}else t=this.parseNamedType();return this.expectOptionalToken(h.BANG)?this.node(e,{kind:m.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:m.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(h.STRING)||this.peek(h.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const s=this.parseConstDirectives(),i=this.many(h.BRACE_L,this.parseOperationTypeDefinition,h.BRACE_R);return this.node(e,{kind:m.SCHEMA_DEFINITION,description:t,directives:s,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(h.COLON);const s=this.parseNamedType();return this.node(e,{kind:m.OPERATION_TYPE_DEFINITION,operation:t,type:s})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const s=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:m.SCALAR_TYPE_DEFINITION,description:t,name:s,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const s=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:m.OBJECT_TYPE_DEFINITION,description:t,name:s,interfaces:i,directives:r,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(h.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(h.BRACE_L,this.parseFieldDefinition,h.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),s=this.parseName(),i=this.parseArgumentDefs();this.expectToken(h.COLON);const r=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:m.FIELD_DEFINITION,description:t,name:s,arguments:i,type:r,directives:o})}parseArgumentDefs(){return this.optionalMany(h.PAREN_L,this.parseInputValueDef,h.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),s=this.parseName();this.expectToken(h.COLON);const i=this.parseTypeReference();let r;this.expectOptionalToken(h.EQUALS)&&(r=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:m.INPUT_VALUE_DEFINITION,description:t,name:s,type:i,defaultValue:r,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const s=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:m.INTERFACE_TYPE_DEFINITION,description:t,name:s,interfaces:i,directives:r,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const s=this.parseName(),i=this.parseConstDirectives(),r=this.parseUnionMemberTypes();return this.node(e,{kind:m.UNION_TYPE_DEFINITION,description:t,name:s,directives:i,types:r})}parseUnionMemberTypes(){return this.expectOptionalToken(h.EQUALS)?this.delimitedMany(h.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const s=this.parseName(),i=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();return this.node(e,{kind:m.ENUM_TYPE_DEFINITION,description:t,name:s,directives:i,values:r})}parseEnumValuesDefinition(){return this.optionalMany(h.BRACE_L,this.parseEnumValueDefinition,h.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),s=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:m.ENUM_VALUE_DEFINITION,description:t,name:s,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw N(this._lexer.source,this._lexer.token.start,`${K(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const s=this.parseName(),i=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();return this.node(e,{kind:m.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:s,directives:i,fields:r})}parseInputFieldsDefinition(){return this.optionalMany(h.BRACE_L,this.parseInputValueDef,h.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===h.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),s=this.optionalMany(h.BRACE_L,this.parseOperationTypeDefinition,h.BRACE_R);if(t.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:m.SCHEMA_EXTENSION,directives:t,operationTypes:s})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),s=this.parseConstDirectives();if(s.length===0)throw this.unexpected();return this.node(e,{kind:m.SCALAR_TYPE_EXTENSION,name:t,directives:s})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),s=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(s.length===0&&i.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:m.OBJECT_TYPE_EXTENSION,name:t,interfaces:s,directives:i,fields:r})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),s=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(s.length===0&&i.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:m.INTERFACE_TYPE_EXTENSION,name:t,interfaces:s,directives:i,fields:r})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),s=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(s.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:m.UNION_TYPE_EXTENSION,name:t,directives:s,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),s=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(s.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:m.ENUM_TYPE_EXTENSION,name:t,directives:s,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),s=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(s.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:m.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:s,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(h.AT);const s=this.parseName(),i=this.parseArgumentDefs(),r=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:m.DIRECTIVE_DEFINITION,description:t,name:s,arguments:i,repeatable:r,locations:o})}parseDirectiveLocations(){return this.delimitedMany(h.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(me,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new Lt(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw N(this._lexer.source,t.start,`Expected ${lt(e)}, found ${K(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===h.NAME&&t.value===e)this.advanceLexer();else throw N(this._lexer.source,t.start,`Expected "${e}", found ${K(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===h.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return N(this._lexer.source,t.start,`Unexpected ${K(t)}.`)}any(e,t,s){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(s);)i.push(t.call(this));return i}optionalMany(e,t,s){if(this.expectOptionalToken(e)){const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(s));return i}return[]}many(e,t,s){this.expectToken(e);const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(s));return i}delimitedMany(e,t){this.expectOptionalToken(e);const s=[];do s.push(t.call(this));while(this.expectOptionalToken(e));return s}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==h.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw N(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function K(n){const e=n.value;return lt(n.kind)+(e!=null?` "${e}"`:"")}function lt(n){return zt(n)?`"${n}"`:n}function cn(n){return`"${n.replace(un,hn)}"`}const un=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function hn(n){return pn[n.charCodeAt(0)]}const pn=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],dn=Object.freeze({});function fn(n,e,t=tt){const s=new Map;for(const A of Object.values(m))s.set(A,gn(e,A));let i,r=Array.isArray(n),o=[n],a=-1,u=[],l=n,c,d;const p=[],g=[];do{a++;const A=a===o.length,B=A&&u.length!==0;if(A){if(c=g.length===0?void 0:p[p.length-1],l=d,d=g.pop(),B)if(r){l=l.slice();let R=0;for(const[q,W]of u){const M=q-R;W===null?(l.splice(M,1),R++):l[M]=W}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(const[R,q]of u)l[R]=q}a=i.index,o=i.keys,u=i.edits,r=i.inArray,i=i.prev}else if(d){if(c=r?a:o[a],l=d[c],l==null)continue;p.push(c)}let v;if(!Array.isArray(l)){var k,x;Be(l)||ne(!1,`Invalid AST Node: ${we(l)}.`);const R=A?(k=s.get(l.kind))===null||k===void 0?void 0:k.leave:(x=s.get(l.kind))===null||x===void 0?void 0:x.enter;if(v=R==null?void 0:R.call(e,l,c,d,p,g),v===dn)break;if(v===!1){if(!A){p.pop();continue}}else if(v!==void 0&&(u.push([c,v]),!A))if(Be(v))l=v;else{p.pop();continue}}if(v===void 0&&B&&u.push([c,l]),A)p.pop();else{var I;i={inArray:r,index:a,keys:o,edits:u,prev:i},r=Array.isArray(l),o=r?l:(I=t[l.kind])!==null&&I!==void 0?I:[],a=-1,u=[],d&&g.push(d),d=l}}while(i!==void 0);return u.length!==0?u[u.length-1][1]:n}function gn(n,e){const t=n[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function mn(n){return fn(n,kn)}const xn=80,kn={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>f(n.definitions,`

`)},OperationDefinition:{leave(n){const e=b("(",f(n.variableDefinitions,", "),")"),t=f([n.operation,f([n.name,e]),f(n.directives," ")]," ");return(t==="query"?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:s})=>n+": "+e+b(" = ",t)+b(" ",f(s," "))},SelectionSet:{leave:({selections:n})=>C(n)},Field:{leave({alias:n,name:e,arguments:t,directives:s,selectionSet:i}){const r=b("",n,": ")+e;let o=r+b("(",f(t,", "),")");return o.length>xn&&(o=r+b(`(
`,se(f(t,`
`)),`
)`)),f([o,f(s," "),i]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+b(" ",f(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>f(["...",b("on ",n),f(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:s,selectionSet:i})=>`fragment ${n}${b("(",f(t,", "),")")} on ${e} ${b("",f(s," ")," ")}`+i},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?qt(n):cn(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+f(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+f(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+b("(",f(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>b("",n,`
`)+f(["schema",f(e," "),C(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>b("",n,`
`)+f(["scalar",e,f(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:s,fields:i})=>b("",n,`
`)+f(["type",e,b("implements ",f(t," & ")),f(s," "),C(i)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:s,directives:i})=>b("",n,`
`)+e+(Me(t)?b(`(
`,se(f(t,`
`)),`
)`):b("(",f(t,", "),")"))+": "+s+b(" ",f(i," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:s,directives:i})=>b("",n,`
`)+f([e+": "+t,b("= ",s),f(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:s,fields:i})=>b("",n,`
`)+f(["interface",e,b("implements ",f(t," & ")),f(s," "),C(i)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:s})=>b("",n,`
`)+f(["union",e,f(t," "),b("= ",f(s," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:s})=>b("",n,`
`)+f(["enum",e,f(t," "),C(s)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>b("",n,`
`)+f([e,f(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:s})=>b("",n,`
`)+f(["input",e,f(t," "),C(s)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:s,locations:i})=>b("",n,`
`)+"directive @"+e+(Me(t)?b(`(
`,se(f(t,`
`)),`
)`):b("(",f(t,", "),")"))+(s?" repeatable":"")+" on "+f(i," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>f(["extend schema",f(n," "),C(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>f(["extend scalar",n,f(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:s})=>f(["extend type",n,b("implements ",f(e," & ")),f(t," "),C(s)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:s})=>f(["extend interface",n,b("implements ",f(e," & ")),f(t," "),C(s)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>f(["extend union",n,f(e," "),b("= ",f(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>f(["extend enum",n,f(e," "),C(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>f(["extend input",n,f(e," "),C(t)]," ")}};function f(n,e=""){var t;return(t=n==null?void 0:n.filter(s=>s).join(e))!==null&&t!==void 0?t:""}function C(n){return b(`{
`,se(f(n,`
`)),`
}`)}function b(n,e,t=""){return e!=null&&e!==""?n+e+t:""}function se(n){return b("  ",n.replace(/\n/g,`
  `))}function Me(n){var e;return(e=n==null?void 0:n.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}const ze="Accept",ke="Content-Type",be="application/json",ct="application/graphql-response+json",Ue=n=>n.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),bn=n=>{const e=n.toLowerCase();return e.includes(ct)||e.includes(be)},je=n=>{try{if(Array.isArray(n))return{_tag:"Batch",executionResults:n.map(Ve)};if(te(n))return{_tag:"Single",executionResult:Ve(n)};throw new Error(`Invalid execution result: result is not object or array. 
Got:
${String(n)}`)}catch(e){return e}},Ve=n=>{if(typeof n!="object"||n===null)throw new Error("Invalid execution result: result is not object");let e,t,s;if("errors"in n){if(!te(n.errors)&&!Array.isArray(n.errors))throw new Error("Invalid execution result: errors is not plain object OR array");e=n.errors}if("data"in n){if(!te(n.data)&&n.data!==null)throw new Error("Invalid execution result: data is not plain object");t=n.data}if("extensions"in n){if(!te(n.extensions))throw new Error("Invalid execution result: extensions is not plain object");s=n.extensions}return{data:t,errors:e,extensions:s}},En=n=>n._tag==="Batch"?n.executionResults.some(Ge):Ge(n.executionResult),Ge=n=>Array.isArray(n.errors)?n.errors.length>0:!!n.errors,ut=n=>typeof n=="object"&&n!==null&&"kind"in n&&n.kind===m.OPERATION_DEFINITION,Tn=n=>{var s;let e;const t=n.definitions.filter(ut);return t.length===1&&(e=(s=t[0].name)==null?void 0:s.value),e},yn=n=>{let e=!1;const t=n.definitions.filter(ut);return t.length===1&&(e=t[0].operation===L.MUTATION),e},de=(n,e)=>{const t=typeof n=="string"?n:mn(n);let s=!1,i;if(e)return{expression:t,isMutation:s,operationName:i};const r=It(()=>typeof n=="string"?an(n):n);return r instanceof Error?{expression:t,isMutation:s,operationName:i}:(i=Tn(r),s=yn(r),{expression:t,operationName:i,isMutation:s})},Ne=JSON,fe=async n=>{const e={...n,method:n.request._tag==="Single"?n.request.document.isMutation?"POST":Le(n.method??"post"):n.request.hasMutations?"POST":Le(n.method??"post"),fetchOptions:{...n.fetchOptions,errorPolicy:n.fetchOptions.errorPolicy??"none"}},s=await Nn(e.method)(e);if(!s.ok)return new U({status:s.status,headers:s.headers},{query:n.request._tag==="Single"?n.request.document.expression:n.request.query,variables:n.request.variables});const i=await wn(s,n.fetchOptions.jsonSerializer??Ne);if(i instanceof Error)throw i;const r={status:s.status,headers:s.headers};if(En(i)&&e.fetchOptions.errorPolicy==="none"){const o=i._tag==="Batch"?{...i.executionResults,...r}:{...i.executionResult,...r};return new U(o,{query:n.request._tag==="Single"?n.request.document.expression:n.request.query,variables:n.request.variables})}switch(i._tag){case"Single":return{...r,...He(e)(i.executionResult)};case"Batch":return{...r,data:i.executionResults.map(He(e))};default:Te(i)}},He=n=>e=>({extensions:e.extensions,data:e.data,errors:n.fetchOptions.errorPolicy==="all"?e.errors:void 0}),wn=async(n,e)=>{const t=n.headers.get(ke),s=await n.text();return t&&bn(t)?je(e.parse(s)):je(s)},Nn=n=>async e=>{const t=new Headers(e.headers);let s=null,i;t.has(ze)||t.set(ze,[ct,be].join(", ")),n==="POST"?(i=(e.fetchOptions.jsonSerializer??Ne).stringify(In(e)),typeof i=="string"&&!t.has(ke)&&t.set(ke,be)):s=Sn(e);const r={method:n,headers:t,body:i,...e.fetchOptions};let o=new URL(e.url),a=r;if(e.middleware){const l=await Promise.resolve(e.middleware({...r,url:e.url,operationName:e.request._tag==="Single"?e.request.document.operationName:void 0,variables:e.request.variables})),{url:c,...d}=l;o=new URL(c),a=d}return s&&s.forEach((l,c)=>{o.searchParams.append(c,l)}),await(e.fetch??fetch)(o,a)},In=n=>{switch(n.request._tag){case"Single":return{query:n.request.document.expression,variables:n.request.variables,operationName:n.request.document.operationName};case"Batch":return We(n.request.query,n.request.variables??[]).map(([e,t])=>({query:e,variables:t}));default:throw Te(n.request)}},Sn=n=>{var s;const e=n.fetchOptions.jsonSerializer??Ne,t=new URLSearchParams;switch(n.request._tag){case"Single":return t.append("query",Ue(n.request.document.expression)),n.request.variables&&t.append("variables",e.stringify(n.request.variables)),n.request.document.operationName&&t.append("operationName",n.request.document.operationName),t;case"Batch":{const i=((s=n.request.variables)==null?void 0:s.map(a=>e.stringify(a)))??[],r=n.request.query.map(Ue),o=We(r,i).map(([a,u])=>({query:a,variables:u}));return t.append("query",e.stringify(o)),t}default:throw Te(n.request)}};class An{constructor(e,t={}){E(this,"url");E(this,"requestConfig");E(this,"rawRequest",async(...e)=>{const[t,s,i]=e,r=_t(t,s,i),{headers:o,fetch:a=globalThis.fetch,method:u="POST",requestMiddleware:l,responseMiddleware:c,excludeOperationName:d,...p}=this.requestConfig,{url:g}=this;r.signal!==void 0&&(p.signal=r.signal);const k=de(r.query,d),x=await fe({url:g,request:{_tag:"Single",document:k,variables:r.variables},headers:{...z(he(o)),...z(r.requestHeaders)},fetch:a,method:u,fetchOptions:p,middleware:l});if(c&&await c(x,{operationName:k.operationName,variables:s,url:this.url}),x instanceof Error)throw x;return x});this.url=e,this.requestConfig=t}async request(e,...t){const[s,i]=t,r=_n(e,s,i),{headers:o,fetch:a=globalThis.fetch,method:u="POST",requestMiddleware:l,responseMiddleware:c,excludeOperationName:d,...p}=this.requestConfig,{url:g}=this;r.signal!==void 0&&(p.signal=r.signal);const k=de(r.document,d),x=await fe({url:g,request:{_tag:"Single",document:k,variables:r.variables},headers:{...z(he(o)),...z(r.requestHeaders)},fetch:a,method:u,fetchOptions:p,middleware:l});if(c&&await c(x,{operationName:k.operationName,variables:r.variables,url:this.url}),x instanceof Error)throw x;return x.data}async batchRequests(e,t){const s=At(e,t),{headers:i,excludeOperationName:r,...o}=this.requestConfig;s.signal!==void 0&&(o.signal=s.signal);const a=s.documents.map(({document:p})=>de(p,r)),u=a.map(({expression:p})=>p),l=a.some(({isMutation:p})=>p),c=s.documents.map(({variables:p})=>p),d=await fe({url:this.url,request:{_tag:"Batch",operationName:void 0,query:u,hasMutations:l,variables:c},headers:{...z(he(i)),...z(s.requestHeaders)},fetch:this.requestConfig.fetch??globalThis.fetch,method:this.requestConfig.method||"POST",fetchOptions:o,middleware:this.requestConfig.requestMiddleware});if(this.requestConfig.responseMiddleware&&await this.requestConfig.responseMiddleware(d,{operationName:void 0,variables:c,url:this.url}),d instanceof Error)throw d;return d.data}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){const{headers:s}=this.requestConfig;return s?s[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}async function ds(n,e,...t){const s=On(n,e,...t);return new An(s.url).request({...s})}const _n=(n,e,t)=>n.document?n:{document:n,variables:e,requestHeaders:t,signal:void 0},On=(n,e,...t)=>{const[s,i]=t;return{url:n,document:e,variables:s,requestHeaders:i,signal:void 0}},fs=(n,...e)=>n.reduce((t,s,i)=>`${t}${s}${i in e?String(e[i]):""}`,"");function Ie(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let F=Ie();function ht(n){F=n}const Q={exec:()=>null};function T(n,e=""){let t=typeof n=="string"?n:n.source;const s={replace:(i,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(S.caret,"$1"),t=t.replace(i,o),s},getRegex:()=>new RegExp(t,e)};return s}const S={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},vn=/^(?:[ \t]*(?:\n|$))+/,Rn=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Cn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,X=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Dn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Se=/(?:[*+-]|\d{1,9}[.)])/,pt=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,dt=T(pt).replace(/bull/g,Se).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Ln=T(pt).replace(/bull/g,Se).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ae=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pn=/^[^\n]+/,_e=/(?!\s*\])(?:\\.|[^\[\]\\])+/,$n=T(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",_e).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Fn=T(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Se).getRegex(),ce="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Oe=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Bn=T("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Oe).replace("tag",ce).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ft=T(Ae).replace("hr",X).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce).getRegex(),qn=T(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ft).getRegex(),ve={blockquote:qn,code:Rn,def:$n,fences:Cn,heading:Dn,hr:X,html:Bn,lheading:dt,list:Fn,newline:vn,paragraph:ft,table:Q,text:Pn},Ye=T("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",X).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce).getRegex(),Mn={...ve,lheading:Ln,table:Ye,paragraph:T(Ae).replace("hr",X).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ye).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce).getRegex()},zn={...ve,html:T(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Oe).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Q,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:T(Ae).replace("hr",X).replace("heading",` *#{1,6} *[^
]`).replace("lheading",dt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Un=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,jn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,gt=/^( {2,}|\\)\n(?!\s*$)/,Vn=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ue=/[\p{P}\p{S}]/u,Re=/[\s\p{P}\p{S}]/u,mt=/[^\s\p{P}\p{S}]/u,Gn=T(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Re).getRegex(),xt=/(?!~)[\p{P}\p{S}]/u,Hn=/(?!~)[\s\p{P}\p{S}]/u,Yn=/(?:[^\s\p{P}\p{S}]|~)/u,Qn=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,kt=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Jn=T(kt,"u").replace(/punct/g,ue).getRegex(),Zn=T(kt,"u").replace(/punct/g,xt).getRegex(),bt="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Xn=T(bt,"gu").replace(/notPunctSpace/g,mt).replace(/punctSpace/g,Re).replace(/punct/g,ue).getRegex(),Wn=T(bt,"gu").replace(/notPunctSpace/g,Yn).replace(/punctSpace/g,Hn).replace(/punct/g,xt).getRegex(),Kn=T("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,mt).replace(/punctSpace/g,Re).replace(/punct/g,ue).getRegex(),es=T(/\\(punct)/,"gu").replace(/punct/g,ue).getRegex(),ts=T(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ns=T(Oe).replace("(?:-->|$)","-->").getRegex(),ss=T("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ns).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ie=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,is=T(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ie).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Et=T(/^!?\[(label)\]\[(ref)\]/).replace("label",ie).replace("ref",_e).getRegex(),Tt=T(/^!?\[(ref)\](?:\[\])?/).replace("ref",_e).getRegex(),rs=T("reflink|nolink(?!\\()","g").replace("reflink",Et).replace("nolink",Tt).getRegex(),Ce={_backpedal:Q,anyPunctuation:es,autolink:ts,blockSkip:Qn,br:gt,code:jn,del:Q,emStrongLDelim:Jn,emStrongRDelimAst:Xn,emStrongRDelimUnd:Kn,escape:Un,link:is,nolink:Tt,punctuation:Gn,reflink:Et,reflinkSearch:rs,tag:ss,text:Vn,url:Q},os={...Ce,link:T(/^!?\[(label)\]\((.*?)\)/).replace("label",ie).getRegex(),reflink:T(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ie).getRegex()},Ee={...Ce,emStrongRDelimAst:Wn,emStrongLDelim:Zn,url:T(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},as={...Ee,br:T(gt).replace("{2,}","*").getRegex(),text:T(Ee.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ee={normal:ve,gfm:Mn,pedantic:zn},G={normal:Ce,gfm:Ee,breaks:as,pedantic:os},ls={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qe=n=>ls[n];function D(n,e){if(e){if(S.escapeTest.test(n))return n.replace(S.escapeReplace,Qe)}else if(S.escapeTestNoEncode.test(n))return n.replace(S.escapeReplaceNoEncode,Qe);return n}function Je(n){try{n=encodeURI(n).replace(S.percentDecode,"%")}catch{return null}return n}function Ze(n,e){var r;const t=n.replace(S.findPipe,(o,a,u)=>{let l=!1,c=a;for(;--c>=0&&u[c]==="\\";)l=!l;return l?"|":" |"}),s=t.split(S.splitPipe);let i=0;if(s[0].trim()||s.shift(),s.length>0&&!((r=s.at(-1))!=null&&r.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;i<s.length;i++)s[i]=s[i].trim().replace(S.slashPipe,"|");return s}function H(n,e,t){const s=n.length;if(s===0)return"";let i=0;for(;i<s&&n.charAt(s-i-1)===e;)i++;return n.slice(0,s-i)}function cs(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return-1}function Xe(n,e,t,s,i){const r=e.href,o=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");if(n[0].charAt(0)!=="!"){s.state.inLink=!0;const u={type:"link",raw:t,href:r,title:o,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,u}return{type:"image",raw:t,href:r,title:o,text:a}}function us(n,e,t){const s=n.match(t.other.indentCodeCompensation);if(s===null)return e;const i=s[1];return e.split(`
`).map(r=>{const o=r.match(t.other.beginningSpace);if(o===null)return r;const[a]=o;return a.length>=i.length?r.slice(i.length):r}).join(`
`)}class re{constructor(e){E(this,"options");E(this,"rules");E(this,"lexer");this.options=e||F}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:H(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],i=us(s,t[3]||"",this.rules);return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(this.rules.other.endingHash.test(s)){const i=H(s,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(s=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:H(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let s=H(t[0],`
`).split(`
`),i="",r="";const o=[];for(;s.length>0;){let a=!1;const u=[];let l;for(l=0;l<s.length;l++)if(this.rules.other.blockquoteStart.test(s[l]))u.push(s[l]),a=!0;else if(!a)u.push(s[l]);else break;s=s.slice(l);const c=u.join(`
`),d=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,r=r?`${r}
${d}`:d;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=p,s.length===0)break;const g=o.at(-1);if((g==null?void 0:g.type)==="code")break;if((g==null?void 0:g.type)==="blockquote"){const k=g,x=k.raw+`
`+s.join(`
`),I=this.blockquote(x);o[o.length-1]=I,i=i.substring(0,i.length-k.raw.length)+I.raw,r=r.substring(0,r.length-k.text.length)+I.text;break}else if((g==null?void 0:g.type)==="list"){const k=g,x=k.raw+`
`+s.join(`
`),I=this.list(x);o[o.length-1]=I,i=i.substring(0,i.length-g.raw.length)+I.raw,r=r.substring(0,r.length-k.raw.length)+I.raw,s=x.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const i=s.length>1,r={type:"list",raw:"",ordered:i,start:i?+s.slice(0,-1):"",loose:!1,items:[]};s=i?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=i?s:"[*+-]");const o=this.rules.other.listItemRegex(s);let a=!1;for(;e;){let l=!1,c="",d="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,B=>" ".repeat(3*B.length)),g=e.split(`
`,1)[0],k=!p.trim(),x=0;if(this.options.pedantic?(x=2,d=p.trimStart()):k?x=t[1].length+1:(x=t[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,d=p.slice(x),x+=t[1].length),k&&this.rules.other.blankLine.test(g)&&(c+=g+`
`,e=e.substring(g.length+1),l=!0),!l){const B=this.rules.other.nextBulletRegex(x),v=this.rules.other.hrRegex(x),R=this.rules.other.fencesBeginRegex(x),q=this.rules.other.headingBeginRegex(x),W=this.rules.other.htmlBeginRegex(x);for(;e;){const M=e.split(`
`,1)[0];let V;if(g=M,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),V=g):V=g.replace(this.rules.other.tabCharGlobal,"    "),R.test(g)||q.test(g)||W.test(g)||B.test(g)||v.test(g))break;if(V.search(this.rules.other.nonSpaceChar)>=x||!g.trim())d+=`
`+V.slice(x);else{if(k||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||R.test(p)||q.test(p)||v.test(p))break;d+=`
`+g}!k&&!g.trim()&&(k=!0),c+=M+`
`,e=e.substring(M.length+1),p=V.slice(x)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let I=null,A;this.options.gfm&&(I=this.rules.other.listIsTask.exec(d),I&&(A=I[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:c,task:!!I,checked:A,loose:!1,text:d,tokens:[]}),r.raw+=c}const u=r.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let l=0;l<r.items.length;l++)if(this.lexer.state.top=!1,r.items[l].tokens=this.lexer.blockTokens(r.items[l].text,[]),!r.loose){const c=r.items[l].tokens.filter(p=>p.type==="space"),d=c.length>0&&c.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=d}if(r.loose)for(let l=0;l<r.items.length;l++)r.items[l].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:i,title:r}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const s=Ze(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===i.length){for(const u of i)this.rules.other.tableAlignRight.test(u)?o.align.push("right"):this.rules.other.tableAlignCenter.test(u)?o.align.push("center"):this.rules.other.tableAlignLeft.test(u)?o.align.push("left"):o.align.push(null);for(let u=0;u<s.length;u++)o.header.push({text:s[u],tokens:this.lexer.inline(s[u]),header:!0,align:o.align[u]});for(const u of r)o.rows.push(Ze(u,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const o=H(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=cs(t[2],"()");if(o>-1){const u=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,u).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],r=o[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?i=i.slice(1):i=i.slice(1,-1)),Xe(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const i=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[i.toLowerCase()];if(!r){const o=s[0].charAt(0);return{type:"text",raw:o,text:o}}return Xe(s,r,s[0],this.lexer,this.rules)}}emStrong(e,t,s=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&s.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const o=[...i[0]].length-1;let a,u,l=o,c=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(i=d.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(u=[...a].length,i[3]||i[4]){l+=u;continue}else if((i[5]||i[6])&&o%3&&!((o+u)%3)){c+=u;continue}if(l-=u,l>0)continue;u=Math.min(u,u+l+c);const p=[...i[0]][0].length,g=e.slice(0,o+i.index+p+u);if(Math.min(o,u)%2){const x=g.slice(1,-1);return{type:"em",raw:g,text:x,tokens:this.lexer.inlineTokens(x)}}const k=g.slice(2,-2);return{type:"strong",raw:g,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(s),r=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return i&&r&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,i;return t[2]==="@"?(s=t[1],i="mailto:"+s):(s=t[1],i=s),{type:"link",raw:t[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=t[0],r="mailto:"+i;else{let o;do o=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(o!==t[0]);i=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const s=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:s}}}}class _{constructor(e){E(this,"tokens");E(this,"options");E(this,"state");E(this,"tokenizer");E(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||F,this.options.tokenizer=this.options.tokenizer||new re,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:S,block:ee.normal,inline:G.normal};this.options.pedantic?(t.block=ee.pedantic,t.inline=G.pedantic):this.options.gfm&&(t.block=ee.gfm,this.options.breaks?t.inline=G.breaks:t.inline=G.gfm),this.tokenizer.rules=t}static get rules(){return{block:ee,inline:G}}static lex(e,t){return new _(t).lex(e)}static lexInline(e,t){return new _(t).inlineTokens(e)}lex(e){e=e.replace(S.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var i,r,o;for(this.options.pedantic&&(e=e.replace(S.tabCharGlobal,"    ").replace(S.spaceLine,""));e;){let a;if((r=(i=this.options.extensions)==null?void 0:i.block)!=null&&r.some(l=>(a=l.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const l=t.at(-1);a.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.at(-1).src=l.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let u=e;if((o=this.options.extensions)!=null&&o.startBlock){let l=1/0;const c=e.slice(1);let d;this.options.extensions.startBlock.forEach(p=>{d=p.call({lexer:this},c),typeof d=="number"&&d>=0&&(l=Math.min(l,d))}),l<1/0&&l>=0&&(u=e.substring(0,l+1))}if(this.state.top&&(a=this.tokenizer.paragraph(u))){const l=t.at(-1);s&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(a),s=u.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(a);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var a,u,l;let s=e,i=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,i.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r=!1,o="";for(;e;){r||(o=""),r=!1;let c;if((u=(a=this.options.extensions)==null?void 0:a.inline)!=null&&u.some(p=>(c=p.call({lexer:this},e,t))?(e=e.substring(c.raw.length),t.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const p=t.at(-1);c.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):t.push(c);continue}if(c=this.tokenizer.emStrong(e,s,o)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),t.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),t.push(c);continue}let d=e;if((l=this.options.extensions)!=null&&l.startInline){let p=1/0;const g=e.slice(1);let k;this.options.extensions.startInline.forEach(x=>{k=x.call({lexer:this},g),typeof k=="number"&&k>=0&&(p=Math.min(p,k))}),p<1/0&&p>=0&&(d=e.substring(0,p+1))}if(c=this.tokenizer.inlineText(d)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(o=c.raw.slice(-1)),r=!0;const p=t.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=c.raw,p.text+=c.text):t.push(c);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return t}}class oe{constructor(e){E(this,"options");E(this,"parser");this.options=e||F}space(e){return""}code({text:e,lang:t,escaped:s}){var o;const i=(o=(t||"").match(S.notSpaceStart))==null?void 0:o[0],r=e.replace(S.endingNewline,"")+`
`;return i?'<pre><code class="language-'+D(i)+'">'+(s?r:D(r,!0))+`</code></pre>
`:"<pre><code>"+(s?r:D(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,s=e.start;let i="";for(let a=0;a<e.items.length;a++){const u=e.items[a];i+=this.listitem(u)}const r=t?"ol":"ul",o=t&&s!==1?' start="'+s+'"':"";return"<"+r+o+`>
`+i+"</"+r+`>
`}listitem(e){var s;let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((s=e.tokens[0])==null?void 0:s.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+D(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",s="";for(let r=0;r<e.header.length;r++)s+=this.tablecell(e.header[r]);t+=this.tablerow({text:s});let i="";for(let r=0;r<e.rows.length;r++){const o=e.rows[r];s="";for(let a=0;a<o.length;a++)s+=this.tablecell(o[a]);i+=this.tablerow({text:s})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),s=e.header?"th":"td";return(e.align?`<${s} align="${e.align}">`:`<${s}>`)+t+`</${s}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${D(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:s}){const i=this.parser.parseInline(s),r=Je(e);if(r===null)return i;e=r;let o='<a href="'+e+'"';return t&&(o+=' title="'+D(t)+'"'),o+=">"+i+"</a>",o}image({href:e,title:t,text:s}){const i=Je(e);if(i===null)return D(s);e=i;let r=`<img src="${e}" alt="${s}"`;return t&&(r+=` title="${D(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:D(e.text)}}class De{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class O{constructor(e){E(this,"options");E(this,"renderer");E(this,"textRenderer");this.options=e||F,this.options.renderer=this.options.renderer||new oe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new De}static parse(e,t){return new O(t).parse(e)}static parseInline(e,t){return new O(t).parseInline(e)}parse(e,t=!0){var i,r;let s="";for(let o=0;o<e.length;o++){const a=e[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const l=a,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){s+=c||"";continue}}const u=a;switch(u.type){case"space":{s+=this.renderer.space(u);continue}case"hr":{s+=this.renderer.hr(u);continue}case"heading":{s+=this.renderer.heading(u);continue}case"code":{s+=this.renderer.code(u);continue}case"table":{s+=this.renderer.table(u);continue}case"blockquote":{s+=this.renderer.blockquote(u);continue}case"list":{s+=this.renderer.list(u);continue}case"html":{s+=this.renderer.html(u);continue}case"paragraph":{s+=this.renderer.paragraph(u);continue}case"text":{let l=u,c=this.renderer.text(l);for(;o+1<e.length&&e[o+1].type==="text";)l=e[++o],c+=`
`+this.renderer.text(l);t?s+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):s+=c;continue}default:{const l='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(e,t=this.renderer){var i,r;let s="";for(let o=0;o<e.length;o++){const a=e[o];if((r=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&r[a.type]){const l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=l||"";continue}}const u=a;switch(u.type){case"escape":{s+=t.text(u);break}case"html":{s+=t.html(u);break}case"link":{s+=t.link(u);break}case"image":{s+=t.image(u);break}case"strong":{s+=t.strong(u);break}case"em":{s+=t.em(u);break}case"codespan":{s+=t.codespan(u);break}case"br":{s+=t.br(u);break}case"del":{s+=t.del(u);break}case"text":{s+=t.text(u);break}default:{const l='Token with "'+u.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}}class J{constructor(e){E(this,"options");E(this,"block");this.options=e||F}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?_.lex:_.lexInline}provideParser(){return this.block?O.parse:O.parseInline}}E(J,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class hs{constructor(...e){E(this,"defaults",Ie());E(this,"options",this.setOptions);E(this,"parse",this.parseMarkdown(!0));E(this,"parseInline",this.parseMarkdown(!1));E(this,"Parser",O);E(this,"Renderer",oe);E(this,"TextRenderer",De);E(this,"Lexer",_);E(this,"Tokenizer",re);E(this,"Hooks",J);this.use(...e)}walkTokens(e,t){var i,r;let s=[];for(const o of e)switch(s=s.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const u of a.header)s=s.concat(this.walkTokens(u.tokens,t));for(const u of a.rows)for(const l of u)s=s.concat(this.walkTokens(l.tokens,t));break}case"list":{const a=o;s=s.concat(this.walkTokens(a.items,t));break}default:{const a=o;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(u=>{const l=a[u].flat(1/0);s=s.concat(this.walkTokens(l,t))}):a.tokens&&(s=s.concat(this.walkTokens(a.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const i={...s};if(i.async=this.defaults.async||i.async||!1,s.extensions&&(s.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=t.renderers[r.name];o?t.renderers[r.name]=function(...a){let u=r.renderer.apply(this,a);return u===!1&&(u=o.apply(this,a)),u}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[r.level];o?o.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),s.renderer){const r=this.defaults.renderer||new oe(this.defaults);for(const o in s.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,u=s.renderer[a],l=r[a];r[a]=(...c)=>{let d=u.apply(r,c);return d===!1&&(d=l.apply(r,c)),d||""}}i.renderer=r}if(s.tokenizer){const r=this.defaults.tokenizer||new re(this.defaults);for(const o in s.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,u=s.tokenizer[a],l=r[a];r[a]=(...c)=>{let d=u.apply(r,c);return d===!1&&(d=l.apply(r,c)),d}}i.tokenizer=r}if(s.hooks){const r=this.defaults.hooks||new J;for(const o in s.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,u=s.hooks[a],l=r[a];J.passThroughHooks.has(o)?r[a]=c=>{if(this.defaults.async)return Promise.resolve(u.call(r,c)).then(p=>l.call(r,p));const d=u.call(r,c);return l.call(r,d)}:r[a]=(...c)=>{let d=u.apply(r,c);return d===!1&&(d=l.apply(r,c)),d}}i.hooks=r}if(s.walkTokens){const r=this.defaults.walkTokens,o=s.walkTokens;i.walkTokens=function(a){let u=[];return u.push(o.call(this,a)),r&&(u=u.concat(r.call(this,a))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return _.lex(e,t??this.defaults)}parser(e,t){return O.parse(e,t??this.defaults)}parseMarkdown(e){return(s,i)=>{const r={...i},o={...this.defaults,...r},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&r.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const u=o.hooks?o.hooks.provideLexer():e?_.lex:_.lexInline,l=o.hooks?o.hooks.provideParser():e?O.parse:O.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(c=>u(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>l(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(s=o.hooks.preprocess(s));let c=u(s,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let d=l(c,o);return o.hooks&&(d=o.hooks.postprocess(d)),d}catch(c){return a(c)}}}onError(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+D(s.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(s);throw s}}}const $=new hs;function y(n,e){return $.parse(n,e)}y.options=y.setOptions=function(n){return $.setOptions(n),y.defaults=$.defaults,ht(y.defaults),y};y.getDefaults=Ie;y.defaults=F;y.use=function(...n){return $.use(...n),y.defaults=$.defaults,ht(y.defaults),y};y.walkTokens=function(n,e){return $.walkTokens(n,e)};y.parseInline=$.parseInline;y.Parser=O;y.parser=O.parse;y.Renderer=oe;y.TextRenderer=De;y.Lexer=_;y.lexer=_.lex;y.Tokenizer=re;y.Hooks=J;y.parse=y;y.options;y.setOptions;y.use;y.walkTokens;y.parseInline;O.parse;_.lex;export{fs as g,y as m,ds as r};
