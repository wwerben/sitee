import{A as _,c as a,e as t,a as s,v as i,x as f,w as p,B as v,F as b,s as x,C as M,f as d,o as L,l as k,n as T}from"./index-DCA1-MyC.js";import{g as D,m as j,r as C}from"./marked.esm-Dx4Y22UJ.js";const z={};function B(c,o){return t(),a("h1",null,"Wystąpił błąd")}const q=_(z,[["render",B]]),A="/assets/loader-BW35Dhqs.gif";function G(){window.scrollTo({top:0,behavior:"smooth"})}const P={props:["documentId"],components:{errorpage:q},setup(c){const o=d(null),g=d(!0),e=d(null),m=d(null),u=d(!1),l=d(!1),r=d({}),h=D`
        query Post($documentId: ID!) {
          post(documentId: $documentId) {
            Title
            Des
            publishedAt
            MainImage {
              url
            }
            Images {
              url
            }
          }
        }
      `,w=async()=>{try{const n=await C("http://localhost:1337/graphql",h,{documentId:c.documentId});o.value=n.post,n.post.Images&&n.post.Images.length&&n.post.Images.forEach((le,I)=>{r.value[I]=!1}),await T(),setTimeout(()=>{u.value=!0},200)}catch(n){e.value=n.message}finally{g.value=!1}};L(()=>{w(),G()});const y=k(()=>o.value?j(o.value.Des):"");return{post:o,loading:g,error:e,markdownHtml:y,selectedImage:m,showImages:u,imageLoadedMain:l,galleryImagesLoaded:r,openModal:n=>{m.value=n},closeModal:()=>{m.value=null},handleMainImageLoad:()=>{l.value=!0},handleGalleryImageLoad:n=>{r.value[n]=!0}}}},H={class:"bg-gray-100 pb-16"},S={class:"flex justify-center text-gray-800"},E={class:"max-w-6xl flex justify-center p-3"},O={key:0,class:"p-4 h-screen"},F={key:1},N={key:2},V={class:"text-2xl md:text-4xl font-semibold md:mt-6 mb-1 md:mb-2"},W={class:"text-gray-500 text-sm md:text-lg mb-1"},J={key:0,class:"bg-gray-200 animate-pulse w-full h-full"},K={key:1},Q=["src"],R=["innerHTML"],U={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},X={key:0,class:"bg-gray-200 animate-pulse w-full h-64"},Y=["src","onClick","onLoad"],Z={class:"relative flex items-center mx-2 md:max-w-2/3 h-auto justify-center"},$=["src"];function ee(c,o,g,e,m,u){return t(),a("div",H,[o[6]||(o[6]=s("div",{class:"bg-blue2 h-16 md:h-21 flex justify-center"},null,-1)),s("div",S,[s("div",E,[e.loading?(t(),a("div",O,o[3]||(o[3]=[s("img",{src:A,alt:"Ładowanie"},null,-1)]))):e.error?(t(),a("div",F,[s("p",null,f(c.errorpage),1)])):(t(),a("div",N,[s("h2",V,f(e.post.Title),1),s("p",W," Opublikowano: "+f(new Date(e.post.publishedAt).toLocaleDateString()),1),e.imageLoadedMain?i("",!0):(t(),a("div",J)),e.post.MainImage&&e.post.MainImage.url&&e.showImages?(t(),a("div",K,[p(s("img",{src:"http://localhost:1337"+e.post.MainImage.url,alt:"Główne zdjęcie posta",onLoad:o[0]||(o[0]=(...l)=>e.handleMainImageLoad&&e.handleMainImageLoad(...l)),class:"max-w-full"},null,40,Q),[[v,e.imageLoadedMain]])])):i("",!0),s("div",{class:"mb-4 mt-3 prose-sm md:prose-lg",innerHTML:e.markdownHtml},null,8,R),o[4]||(o[4]=s("hr",{class:"w-full border-t h-3 border-gray-800 mb-4 mt-10"},null,-1)),e.post.Images&&e.post.Images.length&&e.showImages?(t(),a("div",U,[(t(!0),a(b,null,x(e.post.Images,(l,r)=>(t(),a("div",{key:r,class:"overflow-hidden"},[e.galleryImagesLoaded[r]?i("",!0):(t(),a("div",X)),p(s("img",{src:"http://localhost:1337"+l.url,alt:"Obraz z posta",class:"object-cover w-full h-64 md:h-48 cursor-pointer",onClick:h=>e.openModal(l),onLoad:h=>e.handleGalleryImageLoad(r)},null,40,Y),[[v,e.galleryImagesLoaded[r]]])]))),128))])):i("",!0)]))])]),e.selectedImage?(t(),a("div",{key:0,class:"fixed inset-0 flex backdrop-blur-sm items-center justify-center z-50",onClick:o[2]||(o[2]=M((...l)=>e.closeModal&&e.closeModal(...l),["self"]))},[s("div",Z,[s("button",{onClick:o[1]||(o[1]=(...l)=>e.closeModal&&e.closeModal(...l)),class:"absolute top-0 right-0 m-2 opacity-40 md:m-4 text-white text-3xl font-bold"},o[5]||(o[5]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",class:"bi bi-x-circle",viewBox:"0 0 16 16"},[s("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),s("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"})],-1)])),s("img",{src:"http://localhost:1337"+e.selectedImage.url,alt:"Powiększony obraz",class:"h-full w-full"},null,8,$)])])):i("",!0)])}const de=_(P,[["render",ee]]);export{de as default};
